---
import { getLangFromUrl } from "@/i18n/ui";

const lang = getLangFromUrl(Astro.url);
const currentPath = Astro.url.pathname;

const getAlternativePath = (currentLang: string, currentPath: string) => {
  if (currentLang === "en") {
    if (
      currentPath === "/" ||
      currentPath === "/en" ||
      currentPath === "/en/"
    ) {
      return "/es/";
    }
    return currentPath.replace("/en/", "/es/");
  } else {
    if (currentPath === "/es" || currentPath === "/es/") {
      return "/";
    }
    return currentPath.replace("/es/", "/en/");
  }
};

const alternativePath = getAlternativePath(lang, currentPath);
---

<div class="relative inline-block">
  <div
    class="flex items-center bg-gray-200 dark:bg-gray-700 rounded-full p-1 transition-colors"
  >
    <a
      href={lang === "es" ? alternativePath : "/es/"}
      class={`px-3 py-1 rounded-full text-sm font-medium transition-all duration-300 ${
        lang === "es"
          ? "bg-white dark:bg-gray-800 text-gray-900 dark:text-white shadow-sm"
          : "text-gray-600 dark:text-gray-400 hover:bg-white/50 dark:hover:bg-gray-600/50"
      }`}
    >
      ES
    </a>

    <a
      href={lang === "en" ? alternativePath : "/en/"}
      class={`px-3 py-1 rounded-full text-sm font-medium transition-all duration-300 ${
        lang === "en"
          ? "bg-white dark:bg-gray-800 text-gray-900 dark:text-white shadow-sm"
          : "text-gray-600 dark:text-gray-400 hover:bg-white/50 dark:hover:bg-gray-600/50"
      }`}
    >
      EN
    </a>
  </div>
</div>
